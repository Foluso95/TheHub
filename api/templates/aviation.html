{% extends "base.html" %}
{% block content %}
<div class="glass">
    <h2>Data <span class="accent">Terminal</span></h2>
    <input type="text" id="flightSearch" placeholder="Search City (Lagos), Airline (Dana/Lufthansa), or Code (LOS/DLH)..."
           style="width: 100%; padding: 15px; margin-bottom: 25px; border-radius: 10px; border: 1px solid var(--accent); background: #020617; color: white; outline: none;">

    <table style="width: 100%; border-collapse: collapse; text-align: left;">
        <thead style="color: #64748b; font-size: 0.75rem; text-transform: uppercase;">
            <tr style="border-bottom: 1px solid #1e293b;">
                <th style="padding-bottom: 1rem;">Identifier</th>
                <th>Provider</th>
                <th>Path</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="flightTable">
            {% for f in flights %}
            <tr class="flight-row"
                data-keywords="{{ f.flight_iata }} {{ f.airline_iata }} {{ f.dep_iata }} {{ f.arr_iata }} DANA PEACE ARIK NIGERIA LAGOS LUFT DELTA"
                style="border-bottom: 1px solid rgba(255,255,255,0.05);">
                <td style="padding: 1.2rem 0;">
                    <span style="color: var(--accent); font-weight: bold;">{{ f.flight_iata or 'PRV' }}</span><br>
                    <small style="color: {% if f.status_type == 'LIVE' %}#4ade80{% else %}#94a3b8{% endif %}; font-size: 0.65rem;">● {{ f.status_type }}</small>
                </td>
                <td style="font-size: 0.9rem;">{{ f.airline_iata or 'N/A' }}</td>
                <td style="font-size: 0.9rem;">{{ f.dep_iata or '???' }} ➔ {{ f.arr_iata or '???' }}</td>
                <td><a href="/checkout" style="background: var(--accent); color: #020617; padding: 6px 14px; border-radius: 6px; text-decoration: none; font-weight: 800; font-size: 0.7rem;">BUY LOGS</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<script>
document.getElementById('flightSearch').addEventListener('keyup', function() {
    let filter = this.value.toUpperCase();
    let rows = document.querySelectorAll('.flight-row');
    rows.forEach(row => {
        let text = row.getAttribute('data-keywords') + row.innerText;
        row.style.display = text.toUpperCase().includes(filter) ? "" : "none";
    });
});
</script>
{% endblock %}
